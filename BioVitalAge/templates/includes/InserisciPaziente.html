<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href='../../../../static/includes/icone/favicon.png' type="image/x-icon">
    <title>BioVitalAge - Inserisci Paziente</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'includes/homePage.css' %}" />
    <link rel="stylesheet" href="{% static 'includes/InserisciPaziente.css' %}" />

    <!-- Bootstrap import -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Font Import  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap"
      rel="stylesheet"
    />

    <!-- Js Import -->
    <script src="{% static 'includes/js/HomePage.js' %}" defer></script>

    <!-- Chart Import -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
        <!-- Loader -->
        <div id="loading-wrapper">
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
          <div class="spin-wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
          </div>
        </div>    
    <header>
      <nav
        class="col-md-12 d-flex justify-content-between align-items-center nav-bar"
      >
        <div class="col-md-2 d-flex jus nav-bar-logo">
            <a href="{% url 'HomePage' %}">
              <img src="{% static 'includes/icone/Logo.png' %}" alt="logo_img" title="BioVitalAge®"/>
            </a>
        </div>
        <div class="col-md-8 nav-bar-linkage">
          <a href="{% url 'Risultati' %}">Patients</a>
            <a href="{% url 'Calcolatore' %}">BioVitalAge Clock</a>
        </div>
        <div class="col-md-2 nav-bar-user">
          <h3>Demo User</h3>

          <div class="img-container-user-nav-bar">
            <img
              id="userImg"
              src="{% static 'includes/icone/username.png' %}"
              alt="user"
            />
          </div>
          <div class="nav-bar-user-modal" id="userModal">
            <button id="nav-bar-user-modal-btn" class="nav-bar-user-modal-btn">
              log out
            </button>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <div class="main-title-nav">
       
        <div class="main-title-nav">
          <div class="back-tittle">
            <a id="back" href="{% url 'Risultati' %}"><img src="{% static 'includes/icone/arrowBack.png' %}" alt="back_ico" title="Back to patients"></a>
            <h2 class="main-welcome-title">Patients</h2>
          </div>
          <div class="main-menu-trace">
            <a href="{% url 'HomePage' %}">
              <img
                src="{% static 'includes/icone/homePage.png' %}"
                alt="Home Page"
                title="Home Page"
              />
            </a>
            <span>»</span>
            <span>Insert patient</span>
          </div>
        </div>
      </div>

      <form method="POST" action="{% url 'inserisci_paziente' %}" class="form-container" id="age-form"> 
        {% csrf_token %} 
        <div class="section">
            <h3>Patient Information</h3>
            <div class="grid-container patient-info">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" required placeholder="Insert your name">
                </div>
                <div class="form-group">
                    <label for="surname">Surname</label>
                    <input type="text" id="surname" name="surname" required placeholder="Insert your surname">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="text" id="phone" name="phone" required placeholder="Insert your phone">
                </div>
                <div class="form-group">
                    <label for="mail">Mail</label>
                    <input type="email" id="mail" name="mail" required placeholder="Insert your mail">
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth</label>
                    <input type="date" id="dob" name="dob">
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" name="gender" >
                        <option value="M">Male</option>
                        <option value="F">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="place_of_birth">Place of Birth</label>
                    <input type="text" id="place_of_birth" name="place_of_birth" required placeholder="Insert your place of birth">
                </div>
                <div class="form-group">
                    <label for="province">Province</label>
                    <input type="text" id="province" name="province" required placeholder="Enter province (e.g., RM)">
                </div>       
                <div class="form-group">
                    <label for="cap">CAP</label>
                    <input type="text" id="cap" name="cap" required placeholder="Enter cap (e.g., 70100)">
                </div>
                <div class="form-group">
                    <label for="residence">Residence</label>
                    <input type="text" id="residence" name="residence" min="0" max="100" required placeholder="Enter residence">
                </div>
                <div class="form-group">
                    <label for="residence_city">City of residence</label>
                    <input type="text" id="residence_city" name="residence_city" min="0" max="100" required placeholder="Enter residence city">
                </div>
                <div class="form-group">
                    <label for="codice_fiscale">Codice Fiscale</label>
                    <input type="text" id="codice_fiscale" name="codice_fiscale" required placeholder="Insert your fiscal code">
                </div>
                <div class="form-group">
                    <label for="chronological_age">Chronological Age</label>
                    <input type="number" id="chronological_age" name="chronological_age" min="0" max="100" required placeholder="Enter chronological age">
                </div>
                <div class="form-group">
                    <label for="associated_personal">Personal Associated</label>
                    <input type="text" id="associated_personal" name="associated_personal" min="0" max="100" required placeholder="Enter your associated personal">
                </div>
                <div class="form-group">
                  <label for="blood_group">Blood Group</label>
                  <input type="text" id="blood_group" name="blood_group" placeholder="Insert your blood group">
                </div>
                <div class="form-group">
                  <label for="rh_factor">Factor rh</label>
                  <input type="text" id="rh_factor" name="rh_factor" placeholder="Insert your factor rh">
                </div>
            </div>
        </div>
  
        <section class="container_data table_data">
          <h3>Informative Tables</h3>
          <div class="table-container">
            <div>
              <div class="table-title">Anthropometric data</div>
              <div class="responsive-table">
                <table>
                  <thead>
                    <tr>
                      <th>Height</th>
                      <th>Weight</th>
                      <th>BMI</th>
                      <th>BMI detection date</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><input type="text" placeholder="165 cm" /></td>
                      <td><input type="text" placeholder="60 kg" /></td>
                      <td><input type="text" placeholder="22.0" /></td>
                      <td><input type="date" placeholder="2023-08-20" /></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        
            <div>
              <div class="table-title">Abdominal girth</div>
              <div class="responsive-table">
                <table>
                  <thead>
                    <tr>
                      <th>Girth value</th>
                      <th>Notes</th>
                      <th>Date measurement</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><input type="text" placeholder="85 cm" /></td>
                      <td><input type="text" placeholder="Normal" /></td>
                      <td><input type="date" placeholder="2023-02-10" /></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
        
            <h3 class="category-title">Life style</h3>
            <div class="table-container-lifestyle">
              <div class="table-title lifestyle">Alcohol</div>
              <div class="container-card">
                <div class="choose-buttons">
                  <button class="button-style" data-choice="yes">Yes</button>
                  <button class="button-style" data-choice="no">No</button>
                </div>
                <div class="responsive-table hidden">
                  <table>
                    <thead>
                      <tr>
                        <th>Quantity per day</th>
                        <th>Type of alcohol</th>
                        <th>Day</th>
                        <th>Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><input type="text" placeholder="1 bottle" /></td>
                        <td><input type="text" placeholder="Wine" /></td>
                        <td><input type="date" placeholder="2023-01-01" /></td>
                        <td><input type="text" placeholder="Occasional" /></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
        
            <div class="table-container-lifestyle">
              <div class="table-title lifestyle">
                <span>Smoking</span>
              </div>
              <div class="container-card">
                <div class="choose-buttons">
                  <button class="button-style" data-choice="yes">Yes</button>
                  <button class="button-style" data-choice="no">No</button>
                </div>
                <div class="responsive-table hidden">
                  <table>
                    <thead>
                      <tr>
                        <th>Daily quantity</th>
                        <th>Days Smoking</th>
                        <th>Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><input type="text" placeholder="5 cigarettes" /></td>
                        <td><input type="date" placeholder="7 days" /></td>
                        <td><input type="text" placeholder="Reduced intake" /></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
        
            <div class="table-container-lifestyle">
              <div class="table-title lifestyle">Sport</div>
              <div class="container-card">
                <div class="choose-buttons">
                  <button class="button-style" data-choice="yes">Yes</button>
                  <button class="button-style" data-choice="no">No</button>
                </div>
                <div class="responsive-table" data-lifestyle="sporting-lifestyle">
                  <table>
                    <thead>
                      <tr>
                        <th>Physical Activity</th>
                        <th>Level</th>
                        <th>Start day</th>
                        <th>End day</th>
                        <th>Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><input type="text" placeholder="Football" /></td>
                        <td><input type="text" placeholder="Amateur" /></td>
                        <td><input type="date" placeholder="2020-01-01" /></td>
                        <td><input type="date" placeholder="2021-12-31" /></td>
                        <td><input type="text" placeholder="Weekly" /></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="responsive-table hidden" data-lifestyle="sedentary-lifestyle">
                  <table>
                    <thead>
                      <tr>
                        <th>Sedentary</th>
                        <th>Level</th>
                        <th>Start day</th>
                        <th>End day</th>
                        <th>Notes</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td><input type="text" placeholder="Office work" /></td>
                        <td><input type="text" placeholder="Minimal activity" /></td>
                        <td><input type="date" placeholder="2022-01-01" /></td>
                        <td><input type="date" placeholder="2022-12-31" /></td>
                        <td><input type="text" placeholder="Rare workouts" /></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

          <div class="button-container">
            <button id="salvaButton" type="submit" class="button-style">Salva Paziente</button>
          </div>
          
        </section> 
      </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
    
        // Selezioniamo tutti i blocchi che contengono i pulsanti "Yes/No"
        const chooseButtonsContainers = document.querySelectorAll('.choose-buttons');
    
        chooseButtonsContainers.forEach((buttonsContainer) => {
          const yesButton = buttonsContainer.querySelector('[data-choice="yes"]');
          const noButton  = buttonsContainer.querySelector('[data-choice="no"]');
    
          // Troviamo il contenitore delle tabelle per la sezione Sport (o altre)
          const containerCard = buttonsContainer.closest('.container-card');
    
          if (!containerCard) return;
    
          // Troviamo le due tabelle "sporting" e "sedentary"
          const sportingLifestyle  = containerCard.querySelector('[data-lifestyle="sporting-lifestyle"]');
          const sedentaryLifestyle = containerCard.querySelector('[data-lifestyle="sedentary-lifestyle"]');
    
          // Se esistono entrambe, vuol dire che è la sezione "Sport"
          if (sportingLifestyle && sedentaryLifestyle) {
            // Di default rimangono entrambe nascoste, perché nel tuo HTML
            // hai messo class="hidden" su entrambe
    
            // Se clicco "Yes" → mostro sporting, nascondo sedentary
            yesButton.addEventListener('click', (event) => {
              event.preventDefault();
              sportingLifestyle.classList.remove('hidden');
              sedentaryLifestyle.classList.add('hidden');
            });
    
            // Se clicco "No" → mostro sedentary, nascondo sporting
            noButton.addEventListener('click', (event) => {
              event.preventDefault();
              sportingLifestyle.classList.add('hidden');
              sedentaryLifestyle.classList.remove('hidden');
            });
    
          } else {
            // Se non è la sezione "Sport", manteniamo la logica generica
            // (mostro/nascondo una sola tabella successiva)
            const hiddenTable = buttonsContainer.nextElementSibling;
    
            yesButton.addEventListener('click', (event) => {
              event.preventDefault();
              hiddenTable?.classList.remove('hidden');
            });
            noButton.addEventListener('click', (event) => {
              event.preventDefault();
              hiddenTable?.classList.add('hidden');
            });
          }
        });
      });
    </script>    
  </body>
</html>