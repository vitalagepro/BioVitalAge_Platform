{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicon -->
    <link rel="shortcut icon" href='{% static "includes/icone/favicon.png" %}' type="image/x-icon">
    
    <title>BioVitalAge - HomePage</title>

    <!-- Css Import -->
    <link rel="stylesheet" href="{% static 'includes/homePage.css' %}" />
    <link rel="stylesheet" href="{% static 'includes/Componenti.css' %}" />

    <!-- Bootstrap import -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <!-- Font Import  -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet"/>

    <!-- Js Import -->
    <script src="{% static 'includes/js/HomePage.js' %}" defer></script>
    <script src="{% static 'includes/js/spinner.js' %}" defer></script>
  

    <!-- Chart Import -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>

    <!-- Loader -->
    {% include 'components/loader.html' %}

    <div id="sidebar" class="bg-sidebar hidden"></div>
    <!-- NAVBAR -->
    {% include 'components/navBar.html' %}

    <main>
      <div class="main-title-nav">
        <!-- SIDEBAR LATERAL -->
        <div id="sidebar" class="sidebar hidden">
          <div class="sidebar-header">
            <h3 id="sidebar-title">Sezione</h3>
            <button id="closeSidebar">✖</button>
          </div>
          <div id="sidebar-content"></div>
        </div>

        <div class="linkage-container">
          <a href="#" title="Notifiche" class="sidebar-trigger" data-section="Notifiche">
            <img src="{% static 'includes/icone/notifica.png' %}" alt="icon-notify"/>
          </a>
          <a href="#" title="Email" class="sidebar-trigger" data-section="Email">
            <img src="{% static 'includes/icone/email.png' %}" alt="icon-email"/>
          </a>
          <a href="#" title="Update" class="sidebar-trigger" data-section="Update">
            <img src="{% static 'includes/icone/update.png' %}" alt="icon-update"/>
          </a>
          <a href="#" title="Funzionalità" class="sidebar-trigger" data-section="Funzionalità">
            <img src="{% static 'includes/icone/funzionalita.png' %}" alt="icon-funzionalità"/>
          </a>
          <a href="#" title="Configurazione" class="sidebar-trigger" data-section="Configurazione">
            <img src="{% static 'includes/icone/configurazione.png' %}" alt="icon-Configurazione"/>
          </a>
          <a href="{% url 'statistiche' %}" title="Statistiche" data-section="Statistiche">
            <img src="{% static 'includes/icone/statistiche.png' %}" alt="icon-statistiche"/>
          </a>
        </div>

        <div class="main-menu-trace" title="Home Page">
          <a href="{% url 'HomePage' %}">
            <img src="{% static 'includes/icone/homePage.png' %}" alt="" />
          </a>
          <p>»</p>
          <p>Home Page</p>
        </div>
      </div>

      <section class="banner-section">
        <div class="banner">
          <div class="banner-info">
            <h3>Good Morning</h3>
            <h2 class="main-welcome-title" id="nameUser">{{ dottore }}</h2>
            <div class="box-icons">
              <div class="box-info">
                <div class="icon-container">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 3V5H6V9C6 11.2091 7.79086 13 10 13C12.2091 13 14 11.2091 14 9V5H12V3H15C15.5523 3 16 3.44772 16 4V9C16 11.9727 13.8381 14.4405 11.0008 14.9169L11 16.5C11 18.433 12.567 20 14.5 20C15.9973 20 17.275 19.0598 17.7749 17.7375C16.7283 17.27 16 16.2201 16 15C16 13.3431 17.3431 12 19 12C20.6569 12 22 13.3431 22 15C22 16.3711 21.0802 17.5274 19.824 17.8854C19.2102 20.252 17.0592 22 14.5 22C11.4624 22 9 19.5376 9 16.5L9.00019 14.9171C6.16238 14.4411 4 11.9731 4 9V4C4 3.44772 4.44772 3 5 3H8ZM19 14C18.4477 14 18 14.4477 18 15C18 15.5523 18.4477 16 19 16C19.5523 16 20 15.5523 20 15C20 14.4477 19.5523 14 19 14Z"></path>
                  </svg>
                </div>
                <div>
                  <h1>86</h1>
                  <span>Visited Patients</span>
                </div>
              </div>
              <div class="box-info">
                <div class="icon-container">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M10 2C10.5523 2 11 2.44772 11 3V7C11 7.55228 10.5523 8 10 8H8V10H13V9C13 8.44772 13.4477 8 14 8H20C20.5523 8 21 8.44772 21 9V13C21 13.5523 20.5523 14 20 14H14C13.4477 14 13 13.5523 13 13V12H8V18H13V17C13 16.4477 13.4477 16 14 16H20C20.5523 16 21 16.4477 21 17V21C21 21.5523 20.5523 22 20 22H14C13.4477 22 13 21.5523 13 21V20H7C6.44772 20 6 19.5523 6 19V8H4C3.44772 8 3 7.55228 3 7V3C3 2.44772 3.44772 2 4 2H10ZM19 18H15V20H19V18ZM19 10H15V12H19V10ZM9 4H5V6H9V4Z"></path>
                  </svg>
                </div>
                <div>
                  <h1>23</h1>
                  <span>BioVitalAge Clock</span>
                </div>
              </div>
            </div>
          </div>
          <!-- Card for Appointment Calendar -->
            <div class="appointment-container">
              <div class="appoitment-title-container">
                <h3>Appointments</h3>
                <button class="button-style">View All</button>
              </div>
              
              <div class="appointment-card">
                <div class="appointment-header">
                    <div class="info">
                        <h3 title="McDowell">McDowell</h3>
                        <p title="Direct Visit">Today - Direct Visit</p>
                        <p>Time: 10:30AM</p>
                        <p title="mcdowell@test.com">Email: mcdowell@test.com</p>
                        <p title="9876543210">Phone: 9876543210</p>
                    </div>
                </div>
                <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Smith">Smith</h3>
                          <p title="Scheduled Visit">Tomorrow - Scheduled Visit</p>
                          <p>Time: 2:00PM</p>
                          <p title="smith@test.com">Email: smith@test.com</p>
                          <p title="9123456780">Phone: 9123456780</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Johnson">Johnson</h3>
                          <p title="Follow-up Visit">Next Week - Follow-up Visit</p>
                          <p>Time: 11:15AM</p>
                          <p title="johnson@test.com">Email: johnson@test.com</p>
                          <p title="9012345678">Phone: 9012345678</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Taylor">Taylor</h3>
                          <p title="Emergency Visit">Today - Emergency Visit</p>
                          <p>Time: 4:45PM</p>
                          <p title="taylor@test.com">Email: taylor@test.com</p>
                          <p title="8765432109">Phone: 8765432109</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                <div class="appointment-header">
                    <div class="info">
                        <h3 title="Williams">Williams</h3>
                        <p title="Routine Checkup">Next Monday - Routine Checkup</p>
                        <p>Time: 9:00AM</p>
                        <p title="williams@test.com">Email: williams@test.com</p>
                        <p title="8123456789">Phone: 8123456789</p>
                    </div>
                </div>
                <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Brown">Brown</h3>
                          <p title="Physical Therapy">Thursday - Physical Therapy</p>
                          <p>Time: 3:00PM</p>
                          <p title="brown@test.com">Email: brown@test.com</p>
                          <p title="8023456789">Phone: 8023456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Davis">Davis</h3>
                          <p title="Vaccination">Saturday - Vaccination</p>
                          <p>Time: 1:30PM</p>
                          <p title="davis@test.com">Email: davis@test.com</p>
                          <p title="7923456789">Phone: 7923456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Miller">Miller</h3>
                          <p title="Annual Checkup">Friday - Annual Checkup</p>
                          <p>Time: 11:00AM</p>
                          <p title="miller@test.com">Email: miller@test.com</p>
                          <p title="7823456789">Phone: 7823456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Moore">Moore</h3>
                          <p title="Eye Examination">Tuesday - Eye Examination</p>
                          <p>Time: 10:15AM</p>
                          <p title="moore@test.com">Email: moore@test.com</p>
                          <p title="7723456789">Phone: 7723456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="White">White</h3>
                          <p title="Dental Cleaning">Wednesday - Dental Cleaning</p>
                          <p>Time: 2:45PM</p>
                          <p title="white@test.com">Email: white@test.com</p>
                          <p title="7623456789">Phone: 7623456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
              
              <div class="appointment-card">
                  <div class="appointment-header">
                      <div class="info">
                          <h3 title="Jackson">Jackson</h3>
                          <p title="Consultation Visit">Friday - Consultation Visit</p>
                          <p>Time: 4:00PM</p>
                          <p title="jackson@test.com">Email: jackson@test.com</p>
                          <p title="7523456789">Phone: 7523456789</p>
                      </div>
                  </div>
                  <button class="button-style">details</button>
              </div>
            
            </div>
        </div>
      </section>
      
    
     <!--  <div class="contenitore-inserisci-paziente">
        <div class="banner-paziente">
          <div class="banner-backdrop">
            <img src="{% static 'includes/images/banner-home.png' %}" alt="">
          </div>
          <div class="banner-content">
            <h3>Card Vuota</h3>
            <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit.</p>
            <button class="button-style" onclick="window.location.href='{% url 'inserisci_paziente' %}'">Aggiungi</button>
          </div>
        </div>
        <div class="banner-paziente">
          <div class="banner-backdrop">
            <img src="{% static 'includes/images/banner-home.png' %}" alt="">
          </div>
          <div class="banner-content">
            <h3>Inserisci un paziente</h3>
            <p>Sezione di creazione paziente mediante dati base</p>
            <p class="list-info"><span>[</span> Dati Anagrafici, Dati Antromotreci,</p>
            <p class="list-info"> Abdominal girth, Life style <span>]</span></p>
            <button class="button-style" onclick="window.location.href='{% url 'inserisci_paziente' %}'">Aggiungi</button>
          </div>
        </div>
      </div> -->

      <div class="cards">
        <div class="card" id="card-style">
          <h2>Total patients visited</h2>
          <p>150</p>
          <button class="button-style" onclick="goToPatientsPage()">View All</button>
        </div>
        <div class="card" id="card-style">
          <h2>Biological age calculations</h2>
          <p>120</p>
          <button class="button-style" onclick="goToRefertiPage()">Reports</button>
        </div>
        <div class="card" id="card-style">
          <h2>Average Age Patients</h2>
          <p>52 years</p>
        </div>
      </div>
        
      <div class="recent-patients">
        <h2>Ultimi 5 Pazienti Visitati</h2>
        <div class="table-container">
          <div class="table-header">
            <p>Name</p>
            <p>Surname</p>
            <p>Date of Birth</p>
            <p>Codice Fiscale</p>
            <p>Place of Birth</p>
            <p>Chronological Age</p>
            <p>Biological Age</p>
            <p>Ultimo Referto</p>
            <p>Cartella Paziente</p>
          </div>
        
          <div class="table-content">
            {% for persona in persone %}
              <div class="riga-container">
                  <p>{{ persona.name }}</p>
                  <p>{{ persona.surname }}</p>
                  <p>{{ persona.dob|date:"d/m/Y" }}</p>
                  <p>{{ persona.codice_fiscale }}</p>
                  <p>{{ persona.place_of_birth }}</p>
                  <p>{{ persona.chronological_age }}</p>
              
                  {% for dato in datiEstesi %}
                    {% if dato.referto.paziente.id == persona.id %}
                      <p>{{ dato.biological_age }}</p>
                    {% endif %}
                  {% endfor %}
                  <p>
                    <a href="{% url 'persona_detail' persona.id %}">
                      <img src="{% static 'includes/icone/referto.png' %}" alt="Referto" />
                    </a>
                  </p>
                  <p>
                    <a href="{% url 'cartella_paziente' persona.id %}">
                      <img src="{% static 'includes/icone/cartella.png' %}" alt="Cartella" />
                    </a>
                  </p>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>   
 

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
