{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Favicon -->
  <link rel="shortcut icon" href='{% static "includes/icone/favicon.png" %}' type="image/x-icon">

  <title>BioVitalAge - HomePage</title>

  <!-- Css Import -->
  <link rel="stylesheet" href="{% static 'includes/css/homePage.css' %}" />
  <link rel="stylesheet" href="{% static 'includes/css/Componenti.css' %}" />
  <style>
    :root{
      --banner-bg: url("{% static 'includes/images/banner-bg.png' %}");
    }
  </style>

  <!-- Bootstrap import -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Font Import  -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet" />

  <!-- Js Import -->
  <script src="{% static 'includes/js/HomePage.js' %}" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>


  <!-- Chart Import -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

  <!-- Loader -->
  {% include 'components/loader.html' %}

  <div id="sidebar" class="bg-sidebar hidden"></div>
  <!-- NAVBAR -->
  {% include 'components/navBar.html' %}

  <!-- Disclaimer -->
  {% if show_disclaimer %}
    <div id="cookieOverlay" class="cookie-overlay hidden-disclaimer"></div>
    <div id="disclaimerContainer" class="cookie-disclaimer hidden-disclaimer">
      <div id="initialMessage" class="cookie-initial">
        <p>
          <strong>Cookie settings</strong><br>
          Utilizziamo i cookie per fornire e migliorare i nostri servizi, analizzare l'utilizzo del sito e, se l'utente è
          d'accordo, per personalizzare la sua esperienza e commercializzare i nostri servizi. È possibile leggere la nostra <a
            href="#" target="_blank">Cookie Policy</a> qui.
        </p>
        <div class="cookie-buttons">
          <button id="acceptCookies" class="btn-cookie">Accetta tutti</button>
          <button id="rejectCookies" class="btn-cookie">Rifiuta tutti</button>
          <button id="customizeCookies" class="btn-cookie">Personalizza la scelta</button>
        </div>
      </div>

      <div id="customizeSection" class="cookie-customize hidden-disclaimer">
        <h3>Personalizza la scelta di cookie</h3>
        <p>Scegliere i tipi di cookie che si desidera abilitare:</p>

        <div class="toggle-group">
          <label>Cookies funzionali</label>
          <div class="toggle-wrapper">
            <input class="toggle-checkbox" type="checkbox" id="functionalCookies">
            <div class="toggle-container">
              <div class="toggle-button"></div>
            </div>
          </div>
        </div>

        <div class="toggle-group">
          <label>Analytics Cookies</label>
          <div class="toggle-wrapper">
            <input class="toggle-checkbox" type="checkbox" id="analyticsCookies">
            <div class="toggle-container">
              <div class="toggle-button"></div>
            </div>
          </div>
        </div>

        <div class="toggle-group">
          <label>Marketing Cookies</label>
          <div class="toggle-wrapper">
            <input class="toggle-checkbox" type="checkbox" id="marketingCookies">
            <div class="toggle-container">
              <div class="toggle-button"></div>
            </div>
          </div>
        </div>

        <button id="saveCookies" class="btn-cookie">Salva le scelte</button>
      </div>
    </div>
    
    {% else %}
    <p>Il disclaimer non è visibile perché il cookie è impostato.</p>
  {% endif %}
  <!-- Debug: stampa il valore di show_disclaimer -->
  <!-- <p>Debug: show_disclaimer = {{ show_disclaimer }}</p> -->

  <main>
    <!-- MAIN MENU TRACE -->
    <div class="main-title-nav">
      <!-- SIDEBAR LATERAL -->
      <div id="sidebar" class="sidebar hidden">
        <div class="sidebar-header">
          <h3 id="sidebar-title">Sezione</h3>
          <button id="closeSidebar">✖</button>
        </div>
        <div id="sidebar-content"></div>
      </div>

      <div class="linkage-container">
        <a href="#" title="Notifiche" class="sidebar-trigger" data-section="Notifiche">
          <img src="{% static 'includes/icone/notifica.png' %}" alt="icon-notify" />
        </a>
        <a href="#" title="Email" class="sidebar-trigger" data-section="Email">
          <img src="{% static 'includes/icone/email.png' %}" alt="icon-email" />
        </a>
        <a href="#" title="Update" class="sidebar-trigger" data-section="Update">
          <img src="{% static 'includes/icone/update.png' %}" alt="icon-update" />
        </a>
        <a href="#" title="Funzionalità" class="sidebar-trigger" data-section="Funzionalità">
          <img src="{% static 'includes/icone/funzionalita.png' %}" alt="icon-funzionalità" />
        </a>
        <a href="#" title="Configurazione" class="sidebar-trigger" data-section="Configurazione">
          <img src="{% static 'includes/icone/configurazione.png' %}" alt="icon-Configurazione" />
        </a>
        <a href="{% url 'statistiche' %}" title="Statistiche" data-section="Statistiche">
          <img src="{% static 'includes/icone/statistiche.png' %}" alt="icon-statistiche" />
        </a>
      </div>

      <div class="main-menu-trace" title="Home Page">
        <a href="{% url 'HomePage' %}">
          <img src="{% static 'includes/icone/homePage.png' %}" alt="" />
        </a>
        <p>»</p>
        <p>Home Page</p>
      </div>
    </div>

    <!-- BANNER SECTION -->
    <div class="banner">
      <div class="banner-info">
        <h3>Buongiorno</h3>
        <h2 class="main-welcome-title" id="nameUser">Dott. {{ dottore }}</h2>
        <div class="box-icons">
          <div class="box-info">
            <div class="icon-container">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M8 3V5H6V9C6 11.2091 7.79086 13 10 13C12.2091 13 14 11.2091 14 9V5H12V3H15C15.5523 3 16 3.44772 16 4V9C16 11.9727 13.8381 14.4405 11.0008 14.9169L11 16.5C11 18.433 12.567 20 14.5 20C15.9973 20 17.275 19.0598 17.7749 17.7375C16.7283 17.27 16 16.2201 16 15C16 13.3431 17.3431 12 19 12C20.6569 12 22 13.3431 22 15C22 16.3711 21.0802 17.5274 19.824 17.8854C19.2102 20.252 17.0592 22 14.5 22C11.4624 22 9 19.5376 9 16.5L9.00019 14.9171C6.16238 14.4411 4 11.9731 4 9V4C4 3.44772 4.44772 3 5 3H8ZM19 14C18.4477 14 18 14.4477 18 15C18 15.5523 18.4477 16 19 16C19.5523 16 20 15.5523 20 15C20 14.4477 19.5523 14 19 14Z">
                </path>
              </svg>
            </div>
            <div class="icon-description">
              <h3>{{ total_pazienti }}</h3>
              <p>Pazienti Visitati</p>
            </div>
          </div>
          <div class="box-info">
            <div class="icon-container">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M10 2C10.5523 2 11 2.44772 11 3V7C11 7.55228 10.5523 8 10 8H8V10H13V9C13 8.44772 13.4477 8 14 8H20C20.5523 8 21 8.44772 21 9V13C21 13.5523 20.5523 14 20 14H14C13.4477 14 13 13.5523 13 13V12H8V18H13V17C13 16.4477 13.4477 16 14 16H20C20.5523 16 21 16.4477 21 17V21C21 21.5523 20.5523 22 20 22H14C13.4477 22 13 21.5523 13 21V20H7C6.44772 20 6 19.5523 6 19V8H4C3.44772 8 3 7.55228 3 7V3C3 2.44772 3.44772 2 4 2H10ZM19 18H15V20H19V18ZM19 10H15V12H19V10ZM9 4H5V6H9V4Z">
                </path>
              </svg>
            </div>
            <div class="icon-description">
              <h3>23</h3>
              <p>Calcoli BioVitalAge</p>
            </div>
          </div>
        </div>
      </div>

      <div class="reminders">
        <div class="button-container">
          <h3>Promemoria</h3>
          <button class="button">
            <span class="button__icon-wrapper">
              <svg
                viewBox="0 0 14 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="button__icon-svg"
                width="10"
              >
                <path
                  d="M13.376 11.552l-.264-10.44-10.44-.24.024 2.28 6.96-.048L.2 12.56l1.488 1.488 9.432-9.432-.048 6.912 2.304.024z"
                  fill="currentColor"
                ></path>
              </svg>

              <svg
                viewBox="0 0 14 15"
                fill="none"
                width="10"
                xmlns="http://www.w3.org/2000/svg"
                class="button__icon-svg button__icon-svg--copy"
              >
                <path
                  d="M13.376 11.552l-.264-10.44-10.44-.24.024 2.28 6.96-.048L.2 12.56l1.488 1.488 9.432-9.432-.048 6.912 2.304.024z"
                  fill="currentColor"
                ></path>
              </svg>
            </span>
            Vedi Tutti
          </button>
        </div>
        <ul class="reminder-list">
          <li>
            <div class="reminder-text">
              <span>-</span> Controllare i risultati di laboratorio del paziente William Mathews.
            </div>
            <span class="urgency-badge high">Priorità alta</span>
            <div class="reminder-time">Due: 10:00 AM</div>
            <div class="reminder-actions">
              <button class="action-btn approve">✔</button>
              <button class="action-btn delete">✖</button>
            </div>
          </li>
          <li>
            <div class="reminder-text">
              <span>-</span> Preparare le note di consultazione per Adam Bradley.
            </div>
            <span class="urgency-badge medium">Priorità media</span>
            <div class="reminder-time">Due: 2:30 PM</div>
            <div class="reminder-actions">
              <button class="action-btn approve">✔</button>
              <button class="action-btn delete">✖</button>
            </div>
          </li>
          <li>
            <div class="reminder-text">
              <span>-</span> Fissare un appuntamento di follow-up con Kathy Atkinson.
            </div>
            <span class="urgency-badge low">Priorità Bassa</span>
            <div class="reminder-time">Due: Domani</div>
            <div class="reminder-actions">
              <button class="action-btn approve">✔</button>
              <button class="action-btn delete">✖</button>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- CARD APPUNTAMENTI -->
    <div class="cardAppuntamenti">

      <div class="button-container">
        <h3>Appuntamenti</h3>
        <button class="button" onclick="window.location.href='{% url 'appuntamenti' %}'"> <!-- @ts-ignore -->
          <span class="button__icon-wrapper">
            <svg
              viewBox="0 0 14 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="button__icon-svg"
              width="10"
            >
              <path
                d="M13.376 11.552l-.264-10.44-10.44-.24.024 2.28 6.96-.048L.2 12.56l1.488 1.488 9.432-9.432-.048 6.912 2.304.024z"
                fill="currentColor"
              ></path>
            </svg>

            <svg
              viewBox="0 0 14 15"
              fill="none"
              width="10"
              xmlns="http://www.w3.org/2000/svg"
              class="button__icon-svg button__icon-svg--copy"
            >
              <path
                d="M13.376 11.552l-.264-10.44-10.44-.24.024 2.28 6.96-.048L.2 12.56l1.488 1.488 9.432-9.432-.048 6.912 2.304.024z"
                fill="currentColor"
              ></path>
            </svg>
          </span>
          Vedi Tutti
        </button>

      </div>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Nome Paziente</th>
              <th>Età</th>
              <th>Ora</th>
              <th>Diagnosi</th>
              <th>Tipologia</th>
              <th>Azione</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>001</td>
              <td><img src="{% static 'includes/icone/avatar.png' %}" alt="Avatar" class="avatar"> William Mathews</td>
              <td>21</td>
              <td>10:30AM</td>
              <td>Attacco Cardiaco</td>
              <td><span class="badge general">Generale</span></td>
              <td>
                <button class="action-btn approve">✔</button>
                <button class="action-btn delete">✖</button>
              </td>
            </tr>
            <tr>
              <td>002</td>
              <td><img src="{% static 'includes/icone/avatar.png' %}" alt="Avatar" class="avatar"> Adam Bradley</td>
              <td>36</td>
              <td>10:45AM</td>
              <td>Diabetico</td>
              <td><span class="badge consulting">Consulenza</span></td>
              <td>
                <button class="action-btn approve">✔</button>
                <button class="action-btn delete">✖</button>
              </td>
            </tr>
            <tr>
              <td>002</td>
              <td><img src="{% static 'includes/icone/avatar.png' %}" alt="Avatar" class="avatar">Adam Bradley</td>
              <td>36</td>
              <td>10:45AM</td>
              <td>Diabetico</td>
              <td><span class="badge consulting">Consulenza</span></td>
              <td>
                <button class="action-btn approve">✔</button>
                <button class="action-btn delete">✖</button>
              </td>
            </tr>
            <tr>
              <td>002</td>
              <td><img src="{% static 'includes/icone/avatar.png' %}" alt="Avatar" class="avatar"> Adam Bradley</td>
              <td>36</td>
              <td>10:45AM</td>
              <td>Diabetico</td>
              <td><span class="badge consulting">Consulenza</span></td>
              <td>
                <button class="action-btn approve">✔</button>
                <button class="action-btn delete">✖</button>
              </td>
            </tr>
          </tbody>
        </table>

      </div>


    <!-- CARDS REPORT -->
    <div class="cards">
      <div class="report-card" id="card-style">
        <div class="container-info-report">
          <div class="img-container">
            <img src="{% static 'includes/icone/patient.png' %}" alt="">
          </div>
          <div class="report-description">
            <h3>Totale Pazienti</h3>
            <div class="report-info-detail">
              <p class="primary-info">150</p>
              <p> &nbsp;+ 20 &nbsp;settimana scorsa</p>
            </div>
          </div>
        </div>


        <p id="mediaPercentage">20% in più rispetto alla settimana scorsa.</p>

      </div>

      <div class="report-card" id="card-style">
        <div class="container-info-report">
          <div class="img-container">
            <img src="{% static 'includes/icone/referto.png' %}" alt="">
          </div>
          <div class="report-description">
            <h3>Totale Prescrizioni</h3>
            <div class="report-info-detail">
              <p class="primary-info">80</p>
              <p> &nbsp;+ 20 &nbsp;settimana scorsa</p>
            </div>
          </div>
        </div>
        <p id="mediaPercentage">20% in più rispetto alla settimana scorsa.</p>
      </div>

      <div class="report-card" id="card-style">
        <div class="container-info-report">
          <div class="img-container">
            <img src="{% static 'includes/icone/heart.png' %}" alt="">
          </div>
          <div class="report-description">
            <h3>Età media dei pazienti</h3>
            <div class="report-info-detail">
              <p><span>45</span> Anni</p>
              <p>a <span>52</span> Anni</p>
            </div>
          </div>
        </div>
        <p id="mediaPercentage">Mente - età elevata </p>
      </div>

      <div class="report-card" id="card-style">
        <div class="container-info-report">
          <div class="img-container">
            <img src="{% static 'includes/icone/income.png' %}" alt="">
          </div>
          <div class="report-description">
            <h3>Guadagni</h3>
            <div class="report-info-detail">
              <p> &nbsp;+ 980€ &nbsp;il mese scorso</p>
            </div>
          </div>
        </div>
        <p id="mediaPercentage">20% in più rispetto al mese scorso.</p>
      </div>
    </div>



    <!-- TABELLA PAZIENTI RECENTI -->
    <div class="recent-patients">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0 text-center">Ultimi 5 Pazienti Inseriti</h2>
        <a href="{% url 'inserisci_paziente' %}" title="Add Patient" class="button">
          <span class="button__icon-wrapper">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="button__icon-svg" width="14"
              height="14">
              <path d="M12 4V20M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
        
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
              class="button__icon-svg button__icon-svg--copy" width="14" height="14">
              <path d="M12 4V20M4 12H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
        
          </span>
          Aggiungi Paziente
        </a>
      </div>
      <div class="table-container">
        <div class="table-header">
          <p>Nome</p>
          <p>Cognome</p>
          <p>Data di nascita</p>
          <p>Codice Fiscale</p>
          <p>Città di nascita</p>
          <p>Età cronologica</p>
          <p>Cartella Paziente</p>
        </div>

        <div class="table-content">
          {% for persona in persone %}
          <div class="riga-container">
            <p>{{ persona.name|title }}</p>
            <p>{{ persona.surname|title }}</p>
            <p>{{ persona.dob|date:"d/m/Y" }}</p>
            <p>{{ persona.codice_fiscale }}</p>
            <p>{{ persona.place_of_birth|title }}</p>
            <p>{{ persona.chronological_age }}</p>
 
            <p>
              <a href="{% url 'cartella_paziente' persona.id %}">
                <img src="{% static 'includes/icone/cartella.png' %}" alt="Cartella" />
              </a>
            </p>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>


  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>